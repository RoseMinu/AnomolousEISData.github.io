<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Anomalous Battery Cells – 2 Data</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <link rel="stylesheet" href="../css/custom_style.css" />
</head>

<body class="nav-sidebar theme-light" data-page="data" data-crumb="2 Data">
  <div id="site-header-placeholder"></div>

  <div id="page-layout">
    <div id="sidebar-placeholder"></div>

    <main id="content">
      <article class="article">
        <header class="article-header">
          <h1>Understanding the Dataset</h1>
          <div class="article-meta">
            <div><strong>Scope:</strong> Rate capability &amp; EIS sweeps across multiple chemistries</div>
            <div><strong>Last updated:</strong> 2024-06-05</div>
          </div>
        </header>

        <section class="content-section">
          <h2>Data sources</h2>
          <p>
            Each batch of cells is profiled at six states of charge (SOC) and three pulse amplitudes. For every configuration we capture a
            Nyquist trace with 61 frequencies logarithmically spaced between 5 kHz and 5 mHz. The raw measurement files are accompanied by a
            manifest that records cell identifiers, formation lot, assembly line, and baseline capacity results.
          </p>
          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Description</th>
                <th>Refresh cadence</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>impedance_raw/*.csv</code></td>
                <td>Vendor-exported spectra per cell, per SOC.</td>
                <td>Nightly</td>
              </tr>
              <tr>
                <td><code>cell_manifest.csv</code></td>
                <td>Metadata including chemistry, nominal capacity, lot, and QA flags.</td>
                <td>Nightly</td>
              </tr>
              <tr>
                <td><code>rate_test_summary.csv</code></td>
                <td>Discharge results at C/3 to 3C for reference.</td>
                <td>Weekly</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section class="content-section">
          <h2>Feature engineering</h2>
          <p>
            We transform complex impedance values into a compact descriptor set that captures resistive and diffusive behaviour while staying
            model-agnostic. Features are grouped into three buckets:
          </p>
          <ol>
            <li><strong>Spectral morphology:</strong> Peak frequency, low-frequency intercept, and arc diameter statistics.</li>
            <li><strong>Equivalent circuit fits:</strong> Randles parameters estimated via constrained non-linear least squares.</li>
            <li><strong>Derived ratios:</strong> Temperature-corrected resistance ratios and hysteresis between charge / discharge sweeps.</li>
          </ol>
          <p>
            The transformation pipeline lives in <code>src/features/impedance.py</code>. It accepts raw spectra and produces a tidy
            feature matrix keyed by <code>cell_id</code>, <code>soc</code>, and <code>temperature_c</code>.
          </p>
        </section>

        <section class="content-section">
          <h2>Quality controls</h2>
          <div class="callout">
            <strong>Why QC matters</strong>
            Spurious impedance points or incomplete sweeps can mimic the same patterns as a truly defective cell. Automating checks keeps the
            downstream anomaly detector honest.
          </div>
          <ul>
            <li>Frequency coverage is validated against the manifest to ensure no missing high- or low-frequency segments.</li>
            <li>Outlier rejection removes arcs with negative resistance or reactance outside ±5 Ω.</li>
            <li>Cells with unstable temperature probes are flagged, rerun, and excluded from baseline training.</li>
          </ul>
        </section>

        <section class="content-section">
          <h2>Data dictionary</h2>
          <table>
            <thead>
              <tr>
                <th>Column</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>cell_id</code></td>
                <td>string</td>
                <td>Unique identifier assigned during formation.</td>
              </tr>
              <tr>
                <td><code>soc</code></td>
                <td>float</td>
                <td>State of charge at measurement time, expressed as a percentage.</td>
              </tr>
              <tr>
                <td><code>z_real_ohm</code></td>
                <td>float</td>
                <td>Real impedance component after temperature correction.</td>
              </tr>
              <tr>
                <td><code>z_imag_ohm</code></td>
                <td>float</td>
                <td>Imaginary impedance component (negative for inductive behaviour).</td>
              </tr>
              <tr>
                <td><code>arc_ratio</code></td>
                <td>float</td>
                <td>Ratio between high- and mid-frequency arc diameters; stabilises across chemistry families.</td>
              </tr>
            </tbody>
          </table>
          <p>
            Additional derived features used in modelling are documented inline within <code>src/features/impedance.py</code> with unit tests
            demonstrating expected ranges.
          </p>
        </section>

        <nav class="page-nav">
          <div class="prev-link">
            <a href="index.html">← Back: 1 Introduction</a>
          </div>
          <div class="next-link">
            <a href="eda.html">Next: 3 Exploratory Data Analysis →</a>
          </div>
        </nav>
      </article>
    </main>

    <aside id="page-toc">
      <div class="toc-box">
        <h2>On this page</h2>
        <ul id="toc-list"></ul>
      </div>
    </aside>
  </div>

  <div id="footer-placeholder"></div>
  <script src="script.js"></script>
</body>
</html>
